version: "3.5"

services:

  aria2-pro:
    image: p3terx/aria2-pro
    restart: unless-stopped
    environment:
      PUID: ${USERID}
      PGID: ${GROUPID}
      UMASK_SET: 022
      RPC_SECRET: P3TERX
      RPC_PORT: 6800
      LISTEN_PORT: 6888
      DISK_CACHE: 64M
      IPV6_MODE: false
      UPDATE_TRACKERS: true
      CUSTOM_TRACKER_URL:
      TZ: Asia/Shanghai
    volumes:
      #- .aria2/config:/config
      - nextcloud-samba-downloads:/downloads
    network_mode: host
    #network_mode: bridge
    #ports:
      #- 6800:6800
      #- 6888:6888
      #- 6888:6888/udp
    #logging:
      #driver: json-file
      #options:
        #max-size: 1m

  ariang:
    image: p3terx/ariang
    command: --port 8080
    #network_mode: host
    networks:
      - mid-layout
    expose:
      - 8080
    restart: unless-stopped
    #logging:
      #driver: json-file
      #options:
        #max-size: 1m  aria2:

volumes:
  aria2-pro-config:
    driver: local
    driver_opts:
      type: none
      o: bind
      device: "${TMP_FOLDER}/aria2/config"

