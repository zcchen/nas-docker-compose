version: "3.5"

services:
  frps:
    image: zcchen/frps
    restart: always
    secrets:
      - frps-token
      - frps-dashboard-user
      - frps-dashboard-passwd
    network_mode: host
    environment:
      DASHBOARD_USER_FILE: /run/secrets/frps-dashboard-user
      DASHBOARD_PASSWORD_FILE: /run/secrets/frps-dashboard-passwd
      AUTH_TOKEN_FILE: /run/secrets/frps-token
      BIND_PORT_TCP: 7000
      VHOST_HTTP_PORT: 7000
      ALLOW_PORTS: 21000-21100

secrets:
  frps-token:
    file: ../configs/secrets/frp/token.txt
  frps-dashboard-user:
    file: ../configs/secrets/frp/dashboard-user.txt
  frps-dashboard-passwd:
    file: ../configs/secrets/frp/dashboard-passwd.txt
